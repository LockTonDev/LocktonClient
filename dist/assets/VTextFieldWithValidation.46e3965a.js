import{u as L}from"./vee-validate.esm.dcdeb35e.js";import{a7 as C,ad as J,z as d,c as x,e as b,a1 as V,k as A}from"./index.652b5503.js";/*! maska v2.1.10 | (c) Alexander Shabunevich | Released under the MIT license */var N=Object.defineProperty,q=(a,t,e)=>t in a?N(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,v=(a,t,e)=>(q(a,typeof t!="symbol"?t+"":t,e),e);const w={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}};class T{constructor(t={}){var s;v(this,"opts",{}),v(this,"memo",new Map);const e={...t};if(e.tokens!=null){e.tokens=e.tokensReplace?{...e.tokens}:{...w,...e.tokens};for(const n of Object.values(e.tokens))typeof n.pattern=="string"&&(n.pattern=new RegExp(n.pattern))}else e.tokens=w;Array.isArray(e.mask)&&(e.mask.length>1?e.mask=[...e.mask].sort((n,i)=>n.length-i.length):e.mask=(s=e.mask[0])!=null?s:""),e.mask===""&&(e.mask=null),this.opts=e}masked(t){return this.process(t,this.findMask(t))}unmasked(t){return this.process(t,this.findMask(t),!1)}isEager(){return this.opts.eager===!0}isReversed(){return this.opts.reversed===!0}completed(t){const e=this.findMask(t);if(this.opts.mask==null||e==null)return!1;const s=this.process(t,e).length;return typeof this.opts.mask=="string"?s>=this.opts.mask.length:typeof this.opts.mask=="function"?s>=e.length:this.opts.mask.filter(n=>s>=n.length).length===this.opts.mask.length}findMask(t){var n,i;const e=this.opts.mask;if(e==null)return null;if(typeof e=="string")return e;if(typeof e=="function")return e(t);const s=this.process(t,(n=e.slice(-1).pop())!=null?n:"",!1);return(i=e.find(l=>this.process(t,l,!1).length>=s.length))!=null?i:""}escapeMask(t){const e=[],s=[];return t.split("").forEach((n,i)=>{n==="!"&&t[i-1]!=="!"?s.push(i-s.length):e.push(n)}),{mask:e.join(""),escaped:s}}process(t,e,s=!0){var n;if(e==null)return t;const i=`value=${t},mask=${e},masked=${s?1:0}`;if(this.memo.has(i))return this.memo.get(i);const{mask:l,escaped:p}=this.escapeMask(e),o=[],m=this.opts.tokens!=null?this.opts.tokens:{},u=this.isReversed()?-1:1,k=this.isReversed()?"unshift":"push",y=this.isReversed()?0:l.length-1,P=this.isReversed()?()=>r>-1&&h>-1:()=>r<l.length&&h<t.length,U=f=>!this.isReversed()&&f<=y||this.isReversed()&&f>=y;let M,g=-1,r=this.isReversed()?l.length-1:0,h=this.isReversed()?t.length-1:0;for(;P();){const f=l.charAt(r),c=m[f],E=(c==null?void 0:c.transform)!=null?c.transform(t.charAt(h)):t.charAt(h);if(!p.includes(r)&&c!=null){if(E.match(c.pattern)!=null)o[k](E),c.repeated?(g===-1?g=r:r===y&&r!==g&&(r=g-u),y===g&&(r-=u)):c.multiple&&(r-=u),r+=u;else if(c.multiple){const j=((n=o[h-u])==null?void 0:n.match(c.pattern))!=null,S=l.charAt(r+u);j&&S!==""&&m[S]==null?(r+=u,h-=u):o[k]("")}else E===M?M=void 0:c.optional&&(r+=u,h-=u);h+=u}else s&&!this.isEager()&&o[k](f),E===f&&!this.isEager()?h+=u:M=f,this.isEager()||(r+=u);if(this.isEager())for(;U(r)&&(m[l.charAt(r)]==null||p.includes(r));)s?o[k](l.charAt(r)):l.charAt(r)===t.charAt(h)&&(h+=u),r+=u}return this.memo.set(i,o.join("")),this.memo.get(i)}}const B=a=>JSON.parse(a.replaceAll("'",'"')),W=(a,t={})=>{const e={...t};return a.dataset.maska!=null&&a.dataset.maska!==""&&(e.mask=F(a.dataset.maska)),a.dataset.maskaEager!=null&&(e.eager=R(a.dataset.maskaEager)),a.dataset.maskaReversed!=null&&(e.reversed=R(a.dataset.maskaReversed)),a.dataset.maskaTokensReplace!=null&&(e.tokensReplace=R(a.dataset.maskaTokensReplace)),a.dataset.maskaTokens!=null&&(e.tokens=z(a.dataset.maskaTokens)),e},R=a=>a!==""?!!JSON.parse(a):!0,F=a=>a.startsWith("[")&&a.endsWith("]")?B(a):a,z=a=>{if(a.startsWith("{")&&a.endsWith("}"))return B(a);const t={};return a.split("|").forEach(e=>{const s=e.split(":");t[s[0]]={pattern:new RegExp(s[1]),optional:s[2]==="optional",multiple:s[2]==="multiple",repeated:s[2]==="repeated"}}),t};class ${constructor(t,e={}){v(this,"items",new Map),v(this,"beforeinputEvent",s=>{const n=s.target,i=this.items.get(n);i.isEager()&&"inputType"in s&&s.inputType.startsWith("delete")&&i.unmasked(n.value).length<=1&&this.setMaskedValue(n,"")}),v(this,"inputEvent",s=>{if(s instanceof CustomEvent&&s.type==="input"&&s.detail!=null&&typeof s.detail=="object"&&"masked"in s.detail)return;const n=s.target,i=this.items.get(n),l=n.value,p=n.selectionStart,o=n.selectionEnd;let m=l;if(i.isEager()){const u=i.masked(l),k=i.unmasked(l);k===""&&"data"in s&&s.data!=null?m=s.data:k!==i.unmasked(u)&&(m=k)}if(this.setMaskedValue(n,m),"inputType"in s&&(s.inputType.startsWith("delete")||p!=null&&p<l.length))try{n.setSelectionRange(p,o)}catch{}}),this.options=e,typeof t=="string"?this.init(Array.from(document.querySelectorAll(t)),this.getMaskOpts(e)):this.init("length"in t?Array.from(t):[t],this.getMaskOpts(e))}destroy(){for(const t of this.items.keys())t.removeEventListener("input",this.inputEvent),t.removeEventListener("beforeinput",this.beforeinputEvent);this.items.clear()}needUpdateOptions(t,e){const s=this.items.get(t),n=new T(W(t,this.getMaskOpts(e)));return JSON.stringify(s.opts)!==JSON.stringify(n.opts)}needUpdateValue(t){const e=t.dataset.maskaValue;return e==null&&t.value!==""||e!=null&&e!==t.value}getMaskOpts(t){const{onMaska:e,preProcess:s,postProcess:n,...i}=t;return i}init(t,e){for(const s of t){const n=new T(W(s,e));this.items.set(s,n),s.value!==""&&this.setMaskedValue(s,s.value),s.addEventListener("input",this.inputEvent),s.addEventListener("beforeinput",this.beforeinputEvent)}}setMaskedValue(t,e){const s=this.items.get(t);this.options.preProcess!=null&&(e=this.options.preProcess(e));const n=s.masked(e),i=s.unmasked(s.isEager()?n:e),l=s.completed(e),p={masked:n,unmasked:i,completed:l};e=n,this.options.postProcess!=null&&(e=this.options.postProcess(e)),t.value=e,t.dataset.maskaValue=e,this.options.onMaska!=null&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach(o=>o(p)):this.options.onMaska(p)),t.dispatchEvent(new CustomEvent("maska",{detail:p})),t.dispatchEvent(new CustomEvent("input",{detail:p}))}}const O=new WeakMap,Z=a=>{setTimeout(()=>{var t;((t=O.get(a))==null?void 0:t.needUpdateValue(a))===!0&&a.dispatchEvent(new CustomEvent("input"))})},D=(a,t)=>{const e=a instanceof HTMLInputElement?a:a.querySelector("input"),s={...t.arg};if(e==null||(e==null?void 0:e.type)==="file")return;Z(e);const n=O.get(e);if(n!=null){if(!n.needUpdateOptions(e,s))return;n.destroy()}if(t.value!=null){const i=t.value,l=p=>{i.masked=p.masked,i.unmasked=p.unmasked,i.completed=p.completed};s.onMaska=s.onMaska==null?l:Array.isArray(s.onMaska)?[...s.onMaska,l]:[s.onMaska,l]}O.set(e,new $(e,s))};const G={__name:"VTextFieldWithValidation",props:{name:{type:String,required:!0},type:{type:String,default:"text"},label:{type:String,required:!1},min:{type:String,default:""},max:{type:String,default:""},maxlength:{type:String,default:void 0},inputmode:{type:String,default:""},maskOption:{type:Object},suffix:{type:String,default:""}},setup(a){const t=a,{value:e,handleBlur:s,errors:n}=L(C(t,"name"),void 0);let i="",l="";return t.type==="date"&&(i=t.min,l=t.max),(p,o)=>a.maskOption?J((x(),b(A,{key:0,modelValue:d(e),"onUpdate:modelValue":o[0]||(o[0]=m=>V(e)?e.value=m:null),onBlur:d(s),label:a.label,"error-messages":d(n),variant:"outlined","hide-details":"auto"},null,8,["modelValue","onBlur","label","error-messages"])),[[d(D),void 0,t.maskOption]]):a.suffix==""?(x(),b(A,{key:1,modelValue:d(e),"onUpdate:modelValue":o[1]||(o[1]=m=>V(e)?e.value=m:null),onBlur:d(s),label:a.label,"error-messages":d(n),type:a.type,min:d(i),max:d(l),maxlength:a.maxlength,variant:"outlined","hide-details":"auto"},null,8,["modelValue","onBlur","label","error-messages","type","min","max","maxlength"])):(x(),b(A,{key:2,modelValue:d(e),"onUpdate:modelValue":o[2]||(o[2]=m=>V(e)?e.value=m:null),onBlur:d(s),label:a.label,"error-messages":d(n),type:a.type,min:d(i),max:d(l),maxlength:a.maxlength,variant:"outlined","hide-details":"auto",class:"suffixed-input"},null,8,["modelValue","onBlur","label","error-messages","type","min","max","maxlength"]))}};export{G as _};
